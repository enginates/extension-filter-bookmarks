(this["webpackJsonpfilter-bookmarks"]=this["webpackJsonpfilter-bookmarks"]||[]).push([[2],{12:function(e,t,n){e.exports=n(18)},18:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(3),i=n(2),o=n(4),l=n(5),r=n(7),c=n(6),u={name:"default",ext:".png",data:"iVBORw0KGgoAAAANSUhEUgAAAD4AAAAaCAYAAADv/O9kAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH5AMbFhQgjNJxJQAAAPFJREFUWIXtlC8LwlAUR3/+QWEDwTAwiYgIWzKsrwkW04LNYDLbBe1+BIPtZYtV+4JpYYgMk7Bg2kBBNK1NTd47eO98gXMP791bWIT7l59EkAlLM1CULRoA/CRCkXsILlS4bKhw2VDh/8fGqutgQCf8Cu2LlwyMTReibZNqs+D56tUWhOli3eyw6AHmHdf1HoQ5xLxO787BcavAargQZh9TQmsOwlNqcAh3v0xm+sgD/nWL5Y3Wyhoex0dMLicWN0/4PcTo7LGoU2jDnxE2wQE7Umk2hOEeZgGd7Rc5uuq0qHDZUOGyIW+4pRncM5BjaQbeyHkrIkfBCTEAAAAASUVORK5CYII="},d=window.location.origin.includes("localhost:3000")?window.location.origin:".";var g=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={bg:"#ffffff",button:"#2DCC97",clear:!1,configured:!1,filters:[],image:{name:"",ext:"",data:""},label:"Revert Filters",style:"text",text:"#ffffff",useSelectedWS:!1,selectWSList:[]},e.applyFilters=function(){var t=window.tableau.extensions.dashboardContent.dashboard,n=window.tableau.extensions.settings.getAll();if("true"===n.clear)e.clearFilters();else{var a,s=JSON.parse(n.filters),o=Object(i.a)(s);try{var l=function(){var n=a.value;if(!1===n.skip&&(!e.state.useSelectedWS||e.state.selectWSList.includes(n.worksheetName)))switch(n.filterType){case"range":var s={};s="all-values"===n.nullOption?{nullOption:n.nullOption}:"date"===n.dataType?{min:n.min?new Date(n.min):null,max:n.max?new Date(n.max):null}:{min:n.min,max:n.max},t.worksheets.find((function(e){return e.name===n.worksheetName})).applyRangeFilterAsync(n.fieldName,s).catch((function(){return console.log("Failed to set range filter [".concat(n.fieldName,"] to [").concat(s,"] on worksheet [").concat(n.worksheetName,"]"))}));break;case"categorical":t.worksheets.find((function(e){return e.name===n.worksheetName})).applyFilterAsync(n.fieldName,n.appliedValues,n.updateType,{isExcludeMode:n.isExcludeMode}).catch((function(){return console.log("Failed to set categorical filter [".concat(n.fieldName,"] to [").concat(n.appliedValues,"] on worksheet [").concat(n.worksheetName,"]"))}));break;default:return"continue"}};for(o.s();!(a=o.n()).done;)l()}catch(r){o.e(r)}finally{o.f()}}},e}return Object(l.a)(n,[{key:"clearFilters",value:function(){window.tableau.extensions.dashboardContent.dashboard.worksheets.forEach((function(e){e.getFiltersAsync().then((function(t){var n=[];t.forEach((function(t){n.push(e.clearFilterAsync(t.fieldName))}))}))}))}},{key:"configure",value:function(){var e="".concat(d,"/config.html");window.tableau.extensions.ui.displayDialogAsync(e,"",{height:540,width:300}).catch((function(e){switch(e.errorCode){case window.tableau.ErrorCodes.DialogClosedByUser:console.log("Dialog was closed by user.");break;default:console.error(e.message)}}))}},{key:"updateSettings",value:function(e){var t=e.image?JSON.parse(e.image):u;this.setState({bg:e.bg,button:e.button,configured:"true"===e.configured,filters:JSON.parse(e.filters),label:e.label,style:e.style||"text",image:t,text:e.text,useSelectedWS:"true"===e.useSelectedWS,selectWSList:e.selectWSList&&JSON.parse(e.selectWSList)||[]})}},{key:"componentWillMount",value:function(){var e=this;window.tableau.extensions.initializeAsync({configure:this.configure}).then((function(){window.tableau.extensions.settings.addEventListener(window.tableau.TableauEventType.SettingsChanged,(function(t){e.updateSettings(t.newSettings)})),"true"===window.tableau.extensions.settings.getAll().configured?e.updateSettings(window.tableau.extensions.settings.getAll()):(window.tableau.extensions.settings.set("bg",e.state.bg),window.tableau.extensions.settings.set("button",e.state.button),window.tableau.extensions.settings.set("clear",e.state.clear),window.tableau.extensions.settings.set("label",e.state.label),window.tableau.extensions.settings.set("image",JSON.stringify(e.state.image)),window.tableau.extensions.settings.set("style",e.state.style),window.tableau.extensions.settings.set("text",e.state.text),window.tableau.extensions.settings.set("useSelectedWS",e.state.useSelectedWS),window.tableau.extensions.settings.set("selectWSList",JSON.stringify(e.state.selectWSList)),window.tableau.extensions.settings.saveAsync().then((function(){e.configure()})))}))}},{key:"render",value:function(){var e="",t="",n=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{b:parseInt(t[3],16),g:parseInt(t[2],16),r:parseInt(t[1],16)}:null}(this.state.button);n&&(e="rgb(".concat(Math.floor(n.r),", ").concat(Math.floor(n.g),", ").concat(Math.floor(n.b),")"),t="rgba(".concat(Math.floor(n.r),", ").concat(Math.floor(n.g),", ").concat(Math.floor(n.b),", .8)"));var s="\n            button.button:active {\n                background-color: ".concat(e," !important;\n            }\n        "),i=a.createElement("button",{className:"button",onClick:this.applyFilters,style:{backgroundColor:t,color:this.state.text}},this.state.label),o=a.createElement("img",{src:""!==this.state.image.data?"data:image/png;base64, ".concat(this.state.image.data):"data:image/png;base64, ".concat(u.data),style:{cursor:"pointer",maxWidth:"100%",objectFit:"contain"},onClick:this.applyFilters,alt:"Filter"});return a.createElement("div",{className:"outer",style:{backgroundColor:this.state.bg,display:this.state.configured?"flex":"none"}},a.createElement("div",{className:"inner"},a.createElement("style",null,s),"image"===this.state.style?o:i))}}]),n}(a.Component);n(8);s.render(a.createElement(g,null),document.getElementById("container"))},8:function(e,t,n){}},[[12,5,0]]]);
//# sourceMappingURL=entry_index.9f02e423.2ad83311.chunk.js.map