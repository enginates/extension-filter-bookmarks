(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(35)},29:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a,l,s=n(5),i=n(6),o=n(8),r=n(7),c=n(9),u=n(0),d=n(20),m=n(10),f=n(23),g=n(13),b=function(e){function t(){var e,n;Object(s.a)(this,t);for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={bg:"#000000",button:"#000000",clear:!1,filters:[],label:"Revert Filters",saved:!1,text:"#000000"},n.labelChange=function(e){var t=e.target.value;n.setState({label:t});try{window.tableau.extensions.settings.set("label",t),window.tableau.extensions.settings.saveAsync()}catch(a){console.log(a)}},n.bgChange=function(e){n.setState({bg:e.target.value}),window.tableau.extensions.settings.set("bg",e.target.value),window.tableau.extensions.settings.saveAsync()},n.buttonChange=function(e){n.setState({button:e.target.value}),window.tableau.extensions.settings.set("button",e.target.value),window.tableau.extensions.settings.saveAsync()},n.textChange=function(e){n.setState({text:e.target.value}),window.tableau.extensions.settings.set("text",e.target.value),window.tableau.extensions.settings.saveAsync()},n.clearChange=function(e){n.setState({clear:e.target.checked}),window.tableau.extensions.settings.set("clear",e.target.checked),window.tableau.extensions.settings.saveAsync()},n.getFilters=function(){console.log("getting filters");var e=[],t=[];a.worksheets.forEach(function(t){e.push(t.getFiltersAsync())}),Promise.all(e).then(function(e){e.forEach(function(e){e.forEach(function(e){t.push(e)})}),n.constructSettings(t)})},n.submit=function(){var e=n.state.label||"Revert Filters";window.tableau.extensions.settings.set("label",e),window.tableau.extensions.settings.set("configured","true"),window.tableau.extensions.settings.saveAsync().then(function(){window.tableau.extensions.ui.closeDialog("closed")})},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"constructRangeSetting",value:function(e){var t,n=e.minValue.value,a=e.maxValue.value,l="object"===typeof e.maxValue.value||"object"===typeof e.minValue.value?"date":"number",s="Null"===e.maxValue.formattedValue&&"Null"===e.minValue.formattedValue?"all-values":"";return t=!(void 0!==e.minValue.value&&!e.fieldName.startsWith("Action (")),{dataType:l,fieldName:e.fieldName,filterType:e.filterType,max:0===a?1e-13:a,min:0===n?1e-13:n,nullOption:s,skip:t,worksheetName:e.worksheetName}}},{key:"constructCategoricalSetting",value:function(e){var t,n=[],a=!0,l=!1,s=void 0;try{for(var i,o=e.appliedValues[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var r=i.value;n.push(r.formattedValue)}}catch(u){l=!0,s=u}finally{try{a||null==o.return||o.return()}finally{if(l)throw s}}var c=0===n.length?"all":"replace";return t=!("Measure Names"!==e.fieldName&&!e.fieldName.startsWith("Action (")),{appliedValues:n,fieldName:e.fieldName,filterType:e.filterType,isExcludeMode:e.isExcludeMode,skip:t,updateType:c,worksheetName:e.worksheetName}}},{key:"constructSettings",value:function(e){var t=this,n=[],a=!0,l=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var r=i.value;switch(r.filterType){case"range":n.push(this.constructRangeSetting(r));break;case"categorical":n.push(this.constructCategoricalSetting(r));break;default:continue}}}catch(c){l=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(l)throw s}}window.tableau.extensions.settings.set("filters_set","true"),window.tableau.extensions.settings.set("filters",JSON.stringify(n)),window.tableau.extensions.settings.saveAsync().then(function(){t.setState({saved:!0}),setTimeout(function(){t.setState({saved:!1})},1e3)})}},{key:"componentWillMount",value:function(){var e=this;window.tableau.extensions.initializeDialogAsync().then(function(){a=window.tableau.extensions.dashboardContent.dashboard;var t=window.tableau.extensions.settings.getAll();e.setState({bg:t.bg,button:t.button,clear:"true"===t.clear,label:t.label,text:t.text}),"true"!==t.configured&&e.getFilters()})}},{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"container"},u.createElement("div",null,u.createElement("div",{className:"header"},"Filter Bookmarks Configuration",u.createElement("div",{className:"tooltip"},u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Dialogs_x5F_Info",width:"15",height:"15",viewBox:"0 0 15 15"},u.createElement("rect",{id:"Line",x:"7",y:"6",width:"1",height:"5",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"}),u.createElement("rect",{id:"Dot_2_",x:"7",y:"4",width:"1",height:"1",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"}),u.createElement("path",{id:"Circle",d:"M7.5,1C3.9,1,1,3.9,1,7.5S3.9,14,7.5,14 S14,11.1,14,7.5S11.1,1,7.5,1z M7.5,13C4.5,13,2,10.5,2,7.5C2,4.5,4.5,2,7.5,2S13,4.5,13,7.5C13,10.5,10.5,13,7.5,13z",fillRule:"evenodd",clipRule:"evenodd",fill:"#666766"})),u.createElement("span",{className:"tooltiptext"},u.createElement("b",null,"How to Use"),u.createElement("ol",null,u.createElement("li",null,"Set your dashboard filters they way you want to be able to revert to."),u.createElement("li",null,'Open the configuration window and click "Save Settings".')),u.createElement("p",null,"Optional: Customize your buttons label and colors."),u.createElement("p",null,'If you simply want to clear all filters with this button, turn on that setting under "Options".'),u.createElement("p",null,"Note: You can add as many instances of this extension as you like!")))),u.createElement("div",null,u.createElement("div",{className:"title",style:{marginTop:"18px"}},"Button Settings"),u.createElement("div",{className:"section"},u.createElement(g.TextField,{className:"label-text-field",kind:"line",label:"Label",onChange:this.labelChange,value:this.state.label}),this.state.clear?u.createElement("p",null,"Currently clearing all filters."):u.createElement("p",null,"Click ",u.createElement("b",null,"Save Settings")," to save current filters."),u.createElement("div",{className:"set"},u.createElement(g.Button,{onClick:this.getFilters,disabled:this.state.clear},"Save Settings"),u.createElement("span",{className:this.state.saved?"saved show":"saved"},"Settings saved!"))),u.createElement("div",{className:"title"},"Options"),u.createElement("div",{className:"section"},u.createElement(g.Checkbox,{checked:this.state.clear,onChange:this.clearChange,style:{flexGrow:1}},"Ignore settings and just clear all filters")),u.createElement("div",{className:"title"},"Formatting"),u.createElement("div",{className:"section"},u.createElement("div",{className:"format"},u.createElement("div",{className:"ftext"},"Background Color"),u.createElement("div",null,u.createElement("input",{type:"color",value:this.state.bg,onChange:this.bgChange,style:{backgroundColor:this.state.bg}}))),u.createElement("div",{className:"format"},u.createElement("div",{className:"ftext"},"Button Color"),u.createElement("div",null,u.createElement("input",{type:"color",value:this.state.button,onChange:this.buttonChange,style:{backgroundColor:this.state.button}}))),u.createElement("div",{className:"format"},u.createElement("div",{className:"ftext"},"Button Text Color"),u.createElement("div",null,u.createElement("input",{type:"color",value:this.state.text,onChange:this.textChange,style:{backgroundColor:this.state.text}})))))),u.createElement("div",{className:"footer"},u.createElement("div",{className:"btncluster"},u.createElement(g.Button,{kind:"filledGreen",onClick:this.submit,style:{marginLeft:"12px"}},"OK")))))}}]),t}(u.Component);var h=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).state={bg:"#ffffff",button:"#2DCC97",clear:!1,configured:!1,filters:[],label:"Revert Filters",text:"#ffffff"},n.applyFilters=function(){var e=window.tableau.extensions.settings.getAll();if("true"===e.clear)n.clearFilters();else{var t=JSON.parse(e.filters),a=!0,s=!1,i=void 0;try{for(var o,r=function(){var e=o.value;if(!1===e.skip)switch(e.filterType){case"range":var t={};t="all-values"===e.nullOption?{nullOption:e.nullOption}:"date"===e.dataType?{min:new Date(e.min),max:new Date(e.max)}:{min:e.min,max:e.max},l.worksheets.find(function(t){return t.name===e.worksheetName}).applyRangeFilterAsync(e.fieldName,t).catch(console.log);break;case"categorical":l.worksheets.find(function(t){return t.name===e.worksheetName}).applyFilterAsync(e.fieldName,e.appliedValues,e.updateType,{isExcludeMode:e.isExcludeMode}).catch(console.log);break;default:return"continue"}},c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0)r()}catch(u){s=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(s)throw i}}}},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"clearFilters",value:function(){l.worksheets.forEach(function(e){e.getFiltersAsync().then(function(t){var n=[];t.forEach(function(t){n.push(e.clearFilterAsync(t.fieldName))})})})}},{key:"configure",value:function(){var e="".concat(window.location.origin).concat("/extension-filter-bookmarks","/#/config");window.tableau.extensions.ui.displayDialogAsync(e,"",{height:470,width:295}).catch(function(e){switch(e.errorCode){case window.tableau.ErrorCodes.DialogClosedByUser:console.log("Dialog was closed by user.");break;default:console.error(e.message)}})}},{key:"updateSettings",value:function(e){this.setState({bg:e.bg,button:e.button,configured:"true"===e.configured,filters:JSON.parse(e.filters),label:e.label,text:e.text})}},{key:"componentWillMount",value:function(){var e=this;window.tableau.extensions.initializeAsync({configure:this.configure}).then(function(){window.tableau.extensions.settings.addEventListener(window.tableau.TableauEventType.SettingsChanged,function(t){e.updateSettings(t.newSettings)}),l=window.tableau.extensions.dashboardContent.dashboard,"true"===window.tableau.extensions.settings.getAll().configured?e.updateSettings(window.tableau.extensions.settings.getAll()):(window.tableau.extensions.settings.set("bg",e.state.bg),window.tableau.extensions.settings.set("button",e.state.button),window.tableau.extensions.settings.set("clear",e.state.clear),window.tableau.extensions.settings.set("label",e.state.label),window.tableau.extensions.settings.set("text",e.state.text),window.tableau.extensions.settings.saveAsync().then(function(){e.configure()}))})}},{key:"render",value:function(){var e="",t="",n=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{b:parseInt(t[3],16),g:parseInt(t[2],16),r:parseInt(t[1],16)}:null}(this.state.button);n&&(e="rgb(".concat(Math.floor(n.r),", ").concat(Math.floor(n.g),", ").concat(Math.floor(n.b),")"),t="rgba(".concat(Math.floor(n.r),", ").concat(Math.floor(n.g),", ").concat(Math.floor(n.b),", .8)"));var a="\n            button.button:active {\n                background-color: ".concat(e," !important;\n            }\n        ");return u.createElement("div",{className:"outer",style:{backgroundColor:this.state.bg}},u.createElement("div",{className:"inner"},u.createElement("style",null,a),u.createElement("button",{className:"button",onClick:this.applyFilters,style:{backgroundColor:t,color:this.state.text}},this.state.label)))}}]),t}(u.Component),v=(n(29),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"icontainer"},u.createElement("div",{className:"box"},u.createElement("div",{className:"left"},u.createElement("h1",{className:"iheader"},"Filter Bookmarks"),u.createElement("span",{className:"tagline"},"Instantly revert your dashboards to predefined filter settings.")),u.createElement("div",{className:"right"},u.createElement("h4",{className:"big"},"What is it?"),u.createElement("p",null,"This extension enables you to add a button directly into your dashboard that resets to certain filter settings. Great for embedded dashboards that do not have the toolbar showing or for a more intuitive interface."),u.createElement("h4",{className:"big"},"Using the Extension"),u.createElement("ol",null,u.createElement("li",null,"Set your dashboard filters they way you want to be able to revert to."),u.createElement("li",null,'Open the configuration window and click "Save Settings".'),u.createElement("li",null,"Optional: Customize your buttons label and colors.")),u.createElement("p",null,u.createElement("b",null,"Note:")," You can add as many instances of this extension as you like!"),u.createElement("div",{className:"gh"},"Get this extension and more in the ",u.createElement("a",{href:"https://extensiongallery.tableau.com/"},"Extension Gallery"),".")))))}}]),t}(u.Component)),w=(n(30),function(){return u.createElement(u.Fragment,null,u.createElement(m.a,{path:"/",exact:!0,component:v}),u.createElement(m.a,{path:"/bookmarks",component:h}),u.createElement(m.a,{path:"/config",component:b}))}),p=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.createElement(f.a,null,u.createElement(w,null))}}]),t}(u.Component);d.render(u.createElement(p,null),document.getElementById("container"))}},[[24,1,2]]]);
//# sourceMappingURL=main.947aaac0.chunk.js.map